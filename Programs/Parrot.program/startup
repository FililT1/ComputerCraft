os.loadAPI("loader")
SpeedOS = loader.OS()
io = SpeedOS.IO

SpeedOS.LoadAPI("SpeedAPI/peripheral")
SpeedOS.LoadAPI("SpeedAPI/windows")
SpeedOS.LoadAPI("SpeedAPI/SpeedText")

if not peripheral.find("modem") then
  windows.clearScreen(colors.white)
  windows.error("This program requires modem!")
  SpeedOS.Close()
end

rednet.open(peripheral.find("modem"))
windows.clearScreen(colors.white)
term.setTextColor(colors.green)
term.setCursorPos(1, 1)
io.write("["..SpeedText.time().."] ") 
print("Waiting for clients...")
while true do
  event, id, msg, dist = os.pullEvent()
  if event == "rednet_message" then
    rednet.send(id, msg) -- sosi suka
    term.setTextColor(colors.blue)
    io.write("["..SpeedText.time().."] ") 
    term.setTextColor(colors.cyan)
    print("Parroted '"..msg.."' to "..tostring(id).."!")    
  end
end
