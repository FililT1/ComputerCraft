SpeedOS.ToolBarColour = colours.lightGrey
SpeedOS.ToolBarTextColour = colours.white

local install_files = {"VMYEMZAB", "installer2"}
local mon_cfg = "System/OS/monitor.cfg"
local use_mon
local side

for _, value in pairs(install_files) do
  if fs.exists(value) then
    fs.delete(value)
  end
end

if not fs.exists(mon_cfg) then
  mon_cfg2 = fs.open(mon_cfg, "w")
  mon_cfg2.write("false")
  mon_cfg2.close()

else
  mon_cfg2 = fs.open(mon_cfg, "r")
  data_cfg = mon_cfg2.readAll()
  if data_cfg == "false" then
    use_mon = false
  else
    use_mon = true
  end
end

if use_mon then
  for _, value in pairs(rs.getSides()) do
    if peripheral.getType(value) == "monitor" then
      side = value     
      break
    end
  end
  
  shell.run("monitor "..side.." SpeedOS/APILoader")  
  shell.run("monitor "..side.." os")

else
  shell.run("SpeedOS/APILoader")
  shell.run("os")
end
