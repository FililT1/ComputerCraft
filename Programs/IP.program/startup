-----------------------------------------------------------------------------------------------------------------------------------
-- Меняем цвет верхнего тулбара

if SpeedOS then
	SpeedOS.ToolBarColour = colours.lightGrey
	SpeedOS.ToolBarTextColour = colours.white
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Подгружаем АПИ
 
SpeedOS.LoadAPI("SpeedAPI/windows")
SpeedOS.LoadAPI("SpeedAPI/SpeedText")

-----------------------------------------------------------------------------------------------------------------------------------
-- Изменяем цвета интерфейса программы

windows.clearScreen(colors.gray) -- очищаем экран в серый цвет
term.setTextColor(colors.white) -- делаем цвет текста белым(СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА СПЕРМА )

-----------------------------------------------------------------------------------------------------------------------------------
-- Отправка запроса по Интернету для определния IP-адреса отправителя

local response = http.get("https://api.ipify.org/?format=raw") -- отправка, собственно, самого запроса

if not response then -- в случае, если ответа на запрос в интернет не последовало...
	windows.clearScreen(colors.white) -- очищаем экран в белый
	windows.error("Can't reach IP server!") -- выводим ошибку
	SpeedOS.Close() -- закрываем программу
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Печатаем определенный IP-адрес

SpeedText.cPrint("Your IP is "..response.readAll())

-----------------------------------------------------------------------------------------------------------------------------------
-- Ждем, пока пользователь нажмет на клавишу, что приведет к закрытию программы

SpeedText.waitForEvent({"mouse_click", "mouse_drag", "mouse_scroll", "key"}) -- обработчик эвентов
SpeedOS.Close() -- закрываем программу

-----------------------------------------------------------------------------------------------------------------------------------
