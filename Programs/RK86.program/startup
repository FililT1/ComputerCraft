-----------------------------------------------------------------------------------------------------------------------------------
-- Меняем цвет верхнего тулбара

if SpeedOS then
	SpeedOS.ToolBarColour = colours.black
	SpeedOS.ToolBarTextColour = colours.white
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Подгружаем ядро операционной системы

os.loadAPI("RESOURCES/CORE")

-----------------------------------------------------------------------------------------------------------------------------------
-- Массив, в который заносятся все переданные программы параметры(понадобится в будущем)

local tArgs = {...}

-----------------------------------------------------------------------------------------------------------------------------------
-- Загрузочный экран

CORE.LOADING(3)
CORE.CLEAR()
CORE.CURSOR(1, 1)
CORE.LOGO()

-----------------------------------------------------------------------------------------------------------------------------------
-- Запуск программы по переданным параметрам

if #tArgs > 0 then
	if not tArgs[1] == "run" then
		CORE.RUN(tArgs[1])
	else
		if tArgs[2] then
			CORE.RUN(tArgs[2])
		end
	end
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Основной цикл программы. Отправляем в ядро введённые пользователем команды.

while true do
	command = CORE.WAITFORCMD()

	if CORE.ISLUAFUNCTION(command) then
		CORE.RUNLUAFUNCTION(CORE.MAKELUAFUNCTION(command))
	else
		CORE.RUN(command)
	end
end

-----------------------------------------------------------------------------------------------------------------------------------
