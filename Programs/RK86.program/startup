-----------------------------------------------------------------------------------------------------------------------------------
-- Меняем цвет верхнего тулбара

if SpeedOS then
	SpeedOS.ToolBarColour = colours.black
	SpeedOS.ToolBarTextColour = colours.white
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Подгружаем ядро операционной системы

os.loadAPI("Resources/Core")

-----------------------------------------------------------------------------------------------------------------------------------
-- Массив, в который заносятся все переданные программы параметры(понадобится в будущем)

local tArgs = {...}

-----------------------------------------------------------------------------------------------------------------------------------
-- Загрузочный экран

Core.loading(3)
Core.clear()
Core.cursor(1, 1)
Core.logo()

-----------------------------------------------------------------------------------------------------------------------------------
-- Запуск программы по переданным параметрам

if #tArgs > 0 then
	if not tArgs[1] == "run" then
		Core.run(tArgs[1])
	else
		if tArgs[2] then
			Core.run(tArgs[2])
		end
	end
end

-----------------------------------------------------------------------------------------------------------------------------------
-- Основной цикл программы. Отправляем в ядро введённые пользователем команды.

while true do
	command = Core.waitForCommand()

	if Core.isLuaFunction(command) then
		Core.runLuaFunction(Core.makeLuaFunction(command))
	else
		Core.run(command)
	end
end

-----------------------------------------------------------------------------------------------------------------------------------
